<!DOCTYPE html>
<html>
<head>
  <?php session_start(); ?>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Liberation Library</title>
  <!-- replace with 16 x 16 png or other image file -->
  <link rel="shortcut icon" type="image/png" href="https://static.pexels.com/photos/46274/pexels-photo-46274.jpeg"/>

  <!--Fonts in use-->
  <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <!--MyStylesheet-->
  <link href="./css/style.css" rel="stylesheet" type="text/css">

</head>
<body>
  <!-- for testing purposes alone will be a robot icon to indicated you have logged in on click you will log out -->
  <div id="session_id_check" style="z-index: 10000000; display: block; position: fixed; right: 100px; top: 50px; background: black; max-width: 100px; max-height: 100px; color: white">
    id: <?php if(isset($_SESSION['id'])) echo $_SESSION['id']; ?><br>
    emp_id: <?php if(isset($_SESSION['emp_id'])) echo $_SESSION['emp_id']; ?><br>
    failed: <?php if(isset($_SESSION['failed'])) echo $_SESSION['failed']; ?><br>
    <span style="font-size: 7px;">click here to log out</span>
  </div>

  <div class="overlay">
    <div id="emp-verif" class="forms">
      <div id="hide-overlay" class="hide-registry">
        <div></div>
        <div></div>
      </div>
      <span class="accent-titleB">Employee Login:</span>
      <form id="emp-login" method="post" action="" style="margin: 0 5% 0;">
        <input id="username" class="text-field" type="text" placeholder="username">
          <div class="input-back-text">username</div>
        </input>
        <input id="password" class="text-field" type="password" placeholder="password">
          <div class="input-back-text">password</div>
        </input>
        <input class="submit" type="submit" value="submit"></input>
      </form>
    </div>
  </div>

	<div class="hero">
		<div id="log" class="forms">
			<span class="accent-titleB">Login:</span>
			<form id="login" method="post" action="php/login_account.php" style="margin: 0 5% 0;">
				<input name="username" id="username" class="text-field" type="text" placeholder="username">
					<div class="input-back-text">username</div>
				</input>
				<input name="password" id="password" class="text-field" type="password" placeholder="password">
					<div class="input-back-text">password</div>
				</input>
				<input class="submit" type="submit" value="submit"></input>
			</form>
			<div class="reg-button">
				<span class="reg-button-text">Register<span>
			</div>
		</div>

		<div id="reg" class="forms">
			<span class="accent-titleW">Register:</span>
			<div id="hide-registry" class="hide-registry">
        <div></div>
        <div></div>
      </div>
			<form id="register" method="post" action="php/add_account.php" style="margin: 0 5% 0;">
				<input name="username" id="username" class="text-field" type="text" placeholder="username">
					<div class="input-back-text">username</div>
				<input name="password" id="pass" class="text-field" type="password" placeholder="password">
					<div class="input-back-text">password</div>
          <input id="pass-confirm" class="text-field" type="password" placeholder="confirm password">
  					<div class="input-back-text">confirm password</div>
				<input  class="submit" type="submit" value="submit"></input>
			</form>
		</div>

	</div>

	<div class="hosting">
		<div class="shoutout">
			<div class="shoutout-content">
				<h3 class="accent-titleBl ">LOGO</h3>
			</div>
			<!--end shoutout-content-->
			<div class="top-books">

				<div class="top-books-content">
					<div class="head">
					<span class="accent-titleBl">Top Books:</span>
					<p>Fall into a world of the mystical and lovely with these hand picked tales selected by our finest literary connoisseur.</p>
					</div>

				<div class="tail">
					<div class="blocks">
            <div class="top-rated"></div>
						<div class="info">
							<div class="accent-titleW">Title</div>
							<div class="description">this is a generic description of a fake book that is not actually in our database<br><br><br></div>
						</div>
					</div>
					<div class="blocks">
						<div class="info">
							<div class="accent-titleW">No Title</div>
							<div class="description">as is this so do not expect anything to be beyond these books and "titles" because there will be nothing besides sadness</div>
						</div>
					</div>
					<div class="blocks">
						<div class="info">
							<div class="accent-titleW">Title</div>
							<div class="description">this is a generic description of a fake book that is not actually in our database<br><br><br></div>
						</div>
					</div>
					<div class="blocks">
						<div class="info">
							<div class="accent-titleW">No Title</div>
							<div class="description">as is this so do not expect anything to be beyond these books and "titles" because there will be nothing besides sadness</div>
						</div>
					</div>
				</div>
				<!--end top-books-content-->
				</div>

			</div>
			<!--end top-books-->
		</div>
		<!--end shoutout-->
	</div>
	<!--end hosting-->

	<div class="post-hosting">
		<div class="rand-books">
			<div class="rand-books-content">
				<div class="head">
					<span class="accent-titleBl">Random Selection:</span>
					<p>For those more adventurous than those faint hearted of us, become engrossed by your new favourite
					author coming straight from those dustier sections of your local library.</p>
					<div class="surprise-button">
						<span class="surprise-button-text">Surprise Me!<span>
					</div>
				</div>
			</div>
			<!--end rand-books-content-->
		</div>
		<!--end rand-books-->
	</div>
  <div class="footer">
    <div style="position: absolute; bottom:0; background: rgba(244, 247, 250, .85); width: 100%; padding: 10px 25px 10px;">
      <a href="index.html">Home</a>
      <a href="BookRental.html">Book Rental</a>
      <a href="Management.html">Management</a>
      <a href="UserPage.html">User Profile</a>
    </div>
  </div>
  <script src="js/index.js"></script>

  <!-- form animation handling -->
	<script>
	$(window).ready(function(){
		$(window).resize(function(){
			$("#reg").removeAttr('style');
			$("#log").removeAttr('style');
		});

		$("#hide-registry").click(function(){
			$("#reg").removeAttr('style');
			$("#log").removeAttr('style');
		});

    $("#hide-overlay").click(function(){
      $(".overlay").animate({opacity: 0}, 250, "swing");
      setTimeout(function(){$(".overlay").css("display", "none");}, 250);
      $(".overlay").find("form").find("input[type!=submit]").each(function(){
        $(this).removeClass('error');
        $(this).next('.input-back-text').removeClass('error show');
        $(this).val('');
      });
		});

		$(".reg-button").hover(function(){
					if($(window).width() >= 1000){
						if($("#reg").position().left <= 75){
							$("#reg").animate({left: '75px'}, 5, 'swing');
						}
					}
					else {
						if($("#reg").offset().top >= 163.5){
							$("#reg").animate({top: '163.5px'}, 5, 'swing');
						}
					}
			}, function(){
					if($(window).width() >= 1000){
						if($("#reg").position().left <= 75){
							$("#reg").animate({left: '0px'}, 5, 'swing');
						}
					}
					else {
						if($("#reg").offset().top >= 163.5){
							$("#reg").animate({top: '233.5px'}, 5, 'swing');
						}
					}
		});

		$(".reg-button").click(function(){
		var $orig_dimen = $(document).width();
			if($orig_dimen >= 1000){
				$("#reg").animate({left: '350px'}, 500, 'swing');
				$("#log").animate({right: '350px'}, 500, 'swing');
			}
			else {
				$("#reg").animate({top: '162.5px'}, 500, 'swing');
				$("#log").animate({top: '1000px'}, 500, 'swing');
			}
		});

    $(".blocks").click(function(){
      $(".overlay").css("display", "block");
      $(".overlay").animate({opacity: 1}, 250, "swing");
    });

    $(".surprise-button").click(function(){
      $(".overlay").css("display", "block");
      $(".overlay").animate({opacity: 1}, 250, "swing");
    });
	});
	</script>

  <!-- form varification handling -->
  <script>
    $("form").submit(function() {
      /*login form*/
      if($(this).prop('id') == 'login'){
        var failed = false;
        var is_verif_user = false;
        var is_verif_pass = false;

        $(this).find('input[type!=hidden]').each(function(){

          /*checking login credentials (will be compared to database)*/
          /*if(($(this).val() == 'admin' && $(this).prop('id') == 'username')){
            is_verif_user = true;
          }
          /*checking for unkown users*/
          /*else if(!($(this).val() == 'admin') && $(this).prop('id') == 'username') {
            failed = true;
            alert('Username is not found in our records');
          }
          /*checking for corresponding password*/
          /*if(($(this).val() == 'test123' && $(this).prop('id') == 'password')) {
            is_verif_pass = true;
          }
          else {
            failed = true;
          }

          /*checking for empty parameters*/
          if(!$(this).val()) {
            failed = true;
            $(this).addClass('error');
            $(this).next('.input-back-text').addClass('error show');
          }
          /*return to clean slate*/
          else {
            $(this).removeClass('error');
            $(this).next('.input-back-text').removeClass('error show');
          }
        });

        /*login successful*/
        /*if (is_verif_user && is_verif_pass) {
          alert('Admin-login successful');
          return true;
        }*/
        /*login failure*/
        if(failed) {
          /*if(is_verif_user){
            alert('Username or password do not match our records');
          }*/
          return false;
        }
    }

    /*registration form*/
    else if($(this).prop('id') == 'register') {
      var failed = false;

      $(this).find('input[type!=hidden]').each(function(){
        /*checking for empty parameters*/
        if(!$(this).val() ) {
          failed = true;
          $(this).addClass('error');
          $(this).next('.input-back-text').addClass('error show');
        }
        /*return to clean slate*/
        else{
          $(this).removeClass('error');
          $(this).next('.input-back-text').removeClass('error show');
        }
        /*checking for taken accounts*/
        if(($(this).val() == 'admin' && $(this).prop('id') == 'username')){
          failed=true;
          $(this).addClass('error');
          $(this).next('.input-back-text').addClass('error show');
          alert('Username is unavailable');
        }
      });
      /*checking for matching passwords*/
      $(this).find('input[type=password]').each(function(){
        if($(this).prop('id') == 'pass') {orig = $(this).val();}
        else if(!($(this).val() == orig)) { alert('passwords do not match'); failed = true; $(this).addClass('error'); $(this).next('.input-back-text').addClass('error show');}
        else{$(this).removeClass('error'); $(this).next('.input-back-text').removeClass('error show');}
      });

      /*register failure*/
      if(failed) {
        return false;
      }
      else {
        /*add to database*/
      }
    }

    /*emp-login form*/
    if($(this).prop('id') == 'emp-login'){
      var failed = false;
      var is_verif_user = false;
      var is_verif_pass = false;

      $(this).find('input[type!=hidden]').each(function(){
        /*checking login credentials (will be compared to database)*/
        if(($(this).val() == 'admin' && $(this).prop('id') == 'username')){
          is_verif_user = true;
        }
        /*checking for unkown users*/
        else if(!($(this).val() == 'admin') && $(this).prop('id') == 'username') {
          failed = true;
          alert('Username is not found in our records');
        }
        /*checking for corresponding password*/
        if(($(this).val() == 'test123' && $(this).prop('id') == 'password')) {
          is_verif_pass = true;
        }
        else {
          failed = true;
        }

        /*checking for empty parameters*/
        if(!$(this).val()) {
          failed = true;
          $(this).addClass('error');
          $(this).next('.input-back-text').addClass('error show');
        }
        /*return to clean slate*/
        else {
          $(this).removeClass('error');
          $(this).next('.input-back-text').removeClass('error show');
        }
      });

      /*login successful*/
      if (is_verif_user && is_verif_pass) {
        alert('Admin-login successful\n\nEnjoy your book!');
        return true;
      }
      /*login failure*/
      else if(failed) {
        if(is_verif_user){
          alert('Username or password do not match our records');
        }
        return false;
      }
    }
  });
</script>
<!-- logout handling -->

</script>
<!-- preselected book handling -->
</body>
</html>
